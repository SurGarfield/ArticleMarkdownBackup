# Article Markdown Backup Plugin

这是一个 Typecho 插件，主要功能是备份和恢复文章，以及将文章转换为 Markdown 格式。

## 安装
1. 下载插件
2. 打开 Typecho 根目录
3. 解压至 ./usr/plugins/
4. 将目录重命名为`ArticleMarkdownBackup`

## 功能特性

1. **文章备份** - 备份所有文章和评论数据到JSON文件
2. **文章恢复** - 从备份文件恢复文章和评论数据
3. **格式转换** - 将HTML格式的文章转换为Markdown格式
4. **文件管理** - 支持上传备份文件和选择服务器备份文件

## 安装方法

1. 下载插件文件夹到Typecho的`usr/plugins/`目录
2. 确保插件文件夹名为`ArticleMarkdownBackup`
3. 在Typecho后台启用插件

## 使用说明

### 备份功能
- 点击"备份所有文章"按钮可备份当前所有文章和评论
- 备份文件保存在插件目录的`backups`文件夹中
- 文件名格式：`AMD_backup_YYYYMMDD_XX.json`

### 恢复功能
- 选择备份文件后点击"恢复"按钮可恢复数据
- 如果不选择文件，默认使用最新的备份文件
- 支持上传本地备份文件

### Markdown转换
- 点击"全部转为MD格式"可将HTML格式的文章转换为Markdown
- 转换后的文章会添加`<!--markdown-->`标记
- 转换过程不可逆，请谨慎操作（转换前有弹窗提醒）

## 注意事项

1. 转换功能仅对包含HTML标签且未标记为Markdown的文章生效
2. 备份文件包含文章和评论的所有数据
3. 恢复操作会覆盖现有数据，请谨慎操作
4. 插件会在插件目录自动创建`backups`文件夹用于存储备份文件

## 技术说明

- 使用Typecho原生数据库接口进行数据操作
- HTML到Markdown转换采用正则表达式实现
- 理论上支持Typecho 1.2及以上版本（基于1.3版本开发）
